redis:
  image: redis:latest

mysql:
  image: mysql:latest
  volumes: 
    - ${HOME}/data/fishbase:/var/lib/mysql
  environment: 
    MYSQL_ROOT_PASSWORD: root

logstash:
  image: pblittle/docker-logstash:latest
  ports:
    - "9292:9292"
    - "9200:9200"
  environment:
    LOGSTASH_CONFIG_URL: https://raw.githubusercontent.com/ropensci/fishbaseapi/master/logstash.conf
    volumes:
      - /root

api:
  image: ropensci/fishbaseapi:latest
  links:
    - mysql
    - redis
  ports:
   - "80:80"
  volumes_from: 
    - logstash

nginx:
  image: nginx:latest
  net: "container:fishbaseapi_api_1"
  volumes:
    - ${PWD}/nginx.conf:/etc/nginx/nginx.conf
  volumes_from: 
    - api
